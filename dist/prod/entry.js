"use strict";(()=>{var r="scriptsLoaded";var c="IS_DEBUG_MODE";window.IS_DEBUG_MODE=u();window.setDebugMode=o=>{localStorage.setItem(c,o.toString())};function u(){let o=localStorage.getItem(c);return!!(o&&o==="true")}var E=window.IS_DEBUG_MODE?"enabled":"disabled";console.log(`Debug mode is ${E}`);console.log(`To ${window.IS_DEBUG_MODE?"disable":"enable"} debug mode and show debug logs, run \`window.setDebugMode(${window.IS_DEBUG_MODE?"false":"true"})\` in the console`);var s="jsEnv";window.SCRIPTS_ENV=_();window.setScriptSource=o=>{if(o!=="local"&&o!=="cdn"){console.error("Invalid environment. Pass `local` or `cdn`");return}localStorage.setItem(s,o),window.SCRIPTS_ENV=o,console.log(`Environment successfully set to ${o}`)};function _(){return localStorage.getItem(s)||"cdn"}var i="http://localhost:3000/";window.PRODUCTION_BASE="https://cdn.jsdelivr.net/gh/igniteagency/{{repo}}/dist/prod/";window.JS_SCRIPTS=new Set;var l=[];window.addEventListener("DOMContentLoaded",p);function p(){console.debug(`Current script mode: ${window.SCRIPTS_ENV}`),window.SCRIPTS_ENV==="local"?(console.debug("To run JS scripts from production CDN, execute `window.setScriptSource('cdn')` in the browser console"),I()):(console.debug("To run JS scripts from localhost, execute `window.setScriptSource('local')` in the browser console"),S())}function S(){var t;let o=window.SCRIPTS_ENV==="local"?i:window.PRODUCTION_BASE;(t=window.JS_SCRIPTS)==null||t.forEach(n=>{let e=document.createElement("script");e.src=o+n,e.defer=!0;let d=new Promise((a,w)=>{e.onload=a,e.onerror=()=>{console.error(`Failed to load script: ${n}`)}});l.push(d),document.body.appendChild(e)}),Promise.allSettled(l).then(()=>{console.debug("All scripts loaded"),setTimeout(()=>{window.dispatchEvent(new CustomEvent(r))},50)})}function I(){let t=new AbortController,n=setTimeout(()=>{t.abort()},300);fetch(i,{signal:t.signal}).then(e=>{if(!e.ok)throw console.error({response:e}),new Error("localhost response not ok")}).catch(()=>{console.error("localhost not resolved. Switching to production"),window.setScriptSource("cdn")}).finally(()=>{clearTimeout(n),S()})}})();
