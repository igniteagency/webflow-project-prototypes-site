"use strict";(()=>{var l=class{CARD_DURATION=.6;STAGGER=.15;SHADOW_START_AT=.8;fromCards;toSlots;constructor(){this.fromCards=gsap.utils.toArray(".cards-from .card"),this.toSlots=gsap.utils.toArray(".cards-to .card4"),this.logDomNodes(),this.setupCardAnimation(),this.setupScrollTriggerRefresh(),console.debug("Initial script execution finished.")}logDomNodes(){this.fromCards.length===0?console.warn("No '.cards-from .card' elements found."):console.debug(`Found ${this.fromCards.length} 'fromCards'`),this.toSlots.length===0&&this.fromCards.length>0?console.warn("No '.cards-to .card4' elements found for the first animation."):this.fromCards.length>0&&console.debug(`Found ${this.toSlots.length} 'toSlots'`)}setupCardAnimation(){if(console.debug("Setting up First Animation (Cards to Slots)..."),this.fromCards.length>0&&this.toSlots.length>0&&this.fromCards.length<=this.toSlots.length){console.debug("Conditions met for First Animation setup.");let o=gsap.timeline({paused:!0}),g=this.fromCards.length-1;this.fromCards.forEach((r,t)=>{let s=g-t,e=this.toSlots[s];if(!e){console.warn(`First Animation: Slot with index ${s} not found for card ${t}. Skipping.`);return}let f=Flip.getState(r,{props:"filter,opacity,transform"});e.appendChild(r);let i=e.querySelector(".card-shadow-wrap"),h=s*this.STAGGER;o.addLabel(`card${t}`,h);let n=Flip.from(f,{targets:r,duration:this.CARD_DURATION,ease:"power1.inOut",scale:!0,absolute:!0,props:"filter,opacity,transform"});o.add(n,`card${t}`),o.fromTo(r,{rotateY:0,transformOrigin:"center center"},{rotateY:-50,duration:this.CARD_DURATION,ease:"power1.inOut"},`card${t}`),i&&(gsap.set(i,{opacity:0,filter:"blur(100px)"}),n.eventCallback("onUpdate",()=>{let d=n.progress();d>=this.SHADOW_START_AT?gsap.set(e,{zIndex:"auto"}):gsap.set(e,{clearProps:"zIndex"});let c=gsap.utils.clamp(0,1,(d-this.SHADOW_START_AT)/(1-this.SHADOW_START_AT)),p=100*(1-c);gsap.set(i,{opacity:c,filter:`blur(${p}px)`})}))});let a=document.querySelector(".cards-to");a?(console.debug("First Animation: Creating ScrollTrigger for '.cards-to'."),ScrollTrigger.create({animation:o,trigger:a,start:"top+=15% bottom",end:"bottom bottom",scrub:!0})):console.warn("First Animation: '.cards-to' trigger not found for ScrollTrigger.")}else console.debug("Conditions NOT met for First Animation setup. fromCards.length:",this.fromCards.length,"toSlots.length:",this.toSlots.length)}setupScrollTriggerRefresh(){console.debug("Adding window 'load' event listener for ScrollTrigger.refresh()."),window.addEventListener("load",()=>{console.debug("Window 'load' event fired. Calling ScrollTrigger.refresh()."),ScrollTrigger.refresh(),console.debug("ScrollTrigger.refresh() called.")})}};window.Webflow||=[];window.Webflow.push(()=>{new l});})();
